<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IITM BS Admissions</title>
  <link rel="icon" type="image/png" href="https://study.iitm.ac.in/ds/assets/img/logo.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    :root {
      --chatbot-primary: #2563eb;
      --chatbot-primary-hover: #1d4ed8;
      --chatbot-text-on-primary: #ffffff;
    }
    .feedback-buttons {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      align-items: center;
    }
    .feedback-btn {
      background: none;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      padding: 4px 8px;
      cursor: pointer;
      font-size: 14px;
      color: #6c757d;
      transition: all 0.2s;
    }
    .feedback-btn:hover {
      background-color: #f8f9fa;
    }
    .feedback-btn.active-up {
      background-color: #d4edda;
      border-color: #28a745;
      color: #28a745;
    }
    .feedback-btn.active-down {
      background-color: #f8d7da;
      border-color: #dc3545;
      color: #dc3545;
    }
    .feedback-btn.report {
      margin-left: auto;
      color: #856404;
      border-color: #ffc107;
    }
    .feedback-btn.report:hover {
      background-color: #fff3cd;
    }
    .feedback-form {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 12px;
      margin-top: 8px;
    }
    .feedback-form select, .feedback-form textarea {
      width: 100%;
      margin-bottom: 8px;
      padding: 8px;
      border: 1px solid #ced4da;
      border-radius: 4px;
    }
    .feedback-form textarea {
      min-height: 60px;
      resize: vertical;
    }
    .feedback-form-buttons {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
    }
    .feedback-thanks {
      color: #28a745;
      font-size: 14px;
      margin-top: 8px;
    }
    /* FAQ Suggestion Styles */
    .faq-suggestions {
      margin-top: 12px;
    }
    .faq-suggestions p {
      margin-bottom: 8px;
      color: #495057;
    }
    .faq-suggestion {
      display: block;
      width: 100%;
      text-align: left;
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 10px 14px;
      margin-bottom: 8px;
      cursor: pointer;
      font-size: 14px;
      color: #212529;
      transition: all 0.2s ease;
    }
    .faq-suggestion:hover {
      background: #e9ecef;
      border-color: var(--chatbot-primary);
      color: var(--chatbot-primary);
    }
    .faq-suggestion:active {
      background: #dee2e6;
    }
    .faq-suggestion::before {
      content: "â†’ ";
      color: var(--chatbot-primary);
      font-weight: bold;
    }
    .consent-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.98);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      padding: 20px;
    }
    .consent-overlay.hidden {
      display: none;
    }
    .consent-box {
      max-width: 400px;
      text-align: center;
    }
    .consent-box h5 {
      color: var(--chatbot-primary);
      margin-bottom: 16px;
    }
    .consent-box p {
      font-size: 14px;
      color: #555;
      margin-bottom: 12px;
    }
    .consent-box ul {
      text-align: left;
      font-size: 13px;
      color: #666;
      margin-bottom: 20px;
    }
  </style>
</head>

<body class="d-flex flex-column vh-100" style="position: relative;">
  <div id="consent-overlay" class="consent-overlay">
    <div class="consent-box">
      <h4 style="color: var(--chatbot-primary); margin-bottom: 20px;"><i class="bi bi-chat-dots"></i> IITM BS Admissions Chatbot</h4>
      <h5><i class="bi bi-robot"></i> Before You Start</h5>
      <p>Please note the following:</p>
      <ul>
        <li>This chatbot is <strong>powered by AI</strong> and may occasionally provide inaccurate information. Please verify against the reference docs.</li>
        <li>Your conversations are <strong>logged</strong> to help us improve the chat experience.</li>
        <li>This chatbot is for <strong>new applicants only</strong>. If you're an existing IITM BS student, please email <a href="mailto:support@study.iitm.ac.in" style="color: var(--chatbot-primary);">support@study.iitm.ac.in</a>. A chatbot for current students is coming soon!</li>
      </ul>
      <button id="consent-button" class="btn w-100" style="background-color: var(--chatbot-primary); color: var(--chatbot-text-on-primary);">I Agree</button>
    </div>
  </div>
  <div class="d-flex justify-content-between align-items-center flex-shrink-0" style="background-color: var(--chatbot-primary); color: var(--chatbot-text-on-primary); padding: 10px 12px;">
    <h6 class="text-center mb-0">IITM BS Admissions</h6>
    <div class="d-flex align-items-center gap-2">
      <input id="username-input" type="text" class="form-control form-control-sm" placeholder="Email (optional)" style="width: 120px; font-size: 12px;">
      <button id="clear-chat-button" class="btn btn-sm btn-light" title="Clear Chat">
        <i class="bi bi-trash"></i>
      </button>
      <button id="fullscreen-button" class="btn btn-sm btn-light" title="Toggle Fullscreen" style="font-weight: 900; -webkit-text-stroke: 0.5px;">
        <i class="bi bi-fullscreen" id="fullscreen-icon"></i>
      </button>
      <button id="close-chatbot-button" class="btn btn-sm btn-light" title="Close Chat" style="font-weight: 900; -webkit-text-stroke: 0.5px;">
        <i class="bi bi-x-lg"></i>
      </button>
    </div>
  </div>
  <div class="d-flex flex-column flex-grow-1 overflow-hidden p-3">
    <div id="chat-area" class="flex-grow-1 overflow-auto mb-2"></div>
    <form id="chat-form" class="input-group flex-shrink-0">
      <input id="question-input" type="text" class="form-control" placeholder="Ask a question">
      <button id="ask-button" class="btn" style="background-color: var(--chatbot-primary); color: var(--chatbot-text-on-primary); border-color: var(--chatbot-primary);" disabled>Ask</button>
    </form>
    <small id="min-words-hint" class="text-muted mt-1">Please type at least 5 words</small>
  </div>
  <script src="qa.js" type="module"></script>
</body>

</html>
